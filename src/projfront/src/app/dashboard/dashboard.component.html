
<app-menubar></app-menubar>
<div class="container-fluid">
  <div class="row" *ngIf="loggedInUser.user.type == 1">
    <div class="col-2 px-1 bg-dark position-fixed" id="sticky-sidebar" style="height: 100vh;background-color: #E7E9EB !important;">
      <app-sidemenubar [user]="loggedInUser"></app-sidemenubar>
    </div>
      <div class="col-10 offset-2" id="main">
        <div style="margin-left: 10px;">
          <span>
            <h1>Dashboard</h1>
          </span>
        </div>
        <div class="row" style="margin: 15px">
          <div class="icon-item col-lg-9 ml-lg-5 col-md-11" style="background-color: rgb(194, 224, 225); border: 1px solid #19e7fc; padding: 15px; border-radius: 10px;">
            <div class="doctor-header">
              <h3 style="font-weight: 500;">Your Caregiver</h3>
            </div>
            <div class="body" style="display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
              <div style="display: flex; flex-direction: row; align-items: center;">
                <div class="user one">
                </div>
                <div style="display: flex;flex-direction: column; margin-left: 10px;">
                  <span style="font-weight: 500;">
                    <h3 style="margin:0px; text-transform: capitalize">{{loggedInUser.userData?.DoctorId?.name}}</h3>
                  </span>
                  <span class="icon-item" style="background-color: #cea8af45; border: 1px solid #f09595; padding: 2px; border-radius: 10px; display: flex;justify-content: center;">
                    Psychiatrist
                  </span>
                </div>
              </div>
              <div style="display: flex; flex-direction: row; align-items: center;">
                <div class="doctor-info">
                  <b>Service: </b>
                </div>
                <div class="doctor-info" matTooltip="{{loggedInUser.userData.phoneNumber}}" >
                  <a href="tel:{{loggedInUser.userData.phoneNumber}}"><mat-icon > call</mat-icon></a>
                </div>
                <div class="doctor-info">
                  <a href="https://mail.google.com/mail/?view=cm&fs=1&to={{loggedInUser.user.email}}" target="_blank"> <mat-icon> email</mat-icon></a>
                </div>
                <div class="doctor-info">
                  <a href="https://www.google.com/search?gs_ssp=eJwFwTEOgCAMAMC48gUXFmeKxoT6BH9BC4aoRIIl8nzvlDLZgIOz4AXDNkF3zqIPjAzO40K4QZ-tZ-JgMa6WDqJ9fEtkqS3rFP0tSVMTifV7qqQfsnsZ5w&q=spectrum+health+butterworth&rlz=1C1VDKB_enUS967US967&oq=spectrum+health&aqs=chrome.2.69i57j46i199i291i433i512j46i175i199i512j0i512j0i457i512j0i402j0i512l4.6000j0j7&sourceid=chrome&ie=UTF-8" target="_blank"><mat-icon> location_on</mat-icon></a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 10px;">
          <span>
            <h1>Scheduled Activities</h1>
          </span>
        </div>
        <div class="row" style="margin: 15px">
          <div class="icon-item pcard2 col-lg-3 ml-2 col-md-12" style="background-color: #f3f4f5; border: 1px solid #394afb; border-radius: 10px; cursor: pointer;" onclick="window.open('https://www.youtube.com/results?search_query=anxiety+relief+exercises+')">
            <div class="row" style="display: flex;flex-direction: row;">
              <div class="col-5" style="display: flex;flex-direction: column; margin-left: 10px; align-items: center; justify-content: center;">
                <span style="font-weight: 800;">
                  <h2 style="margin:0px">Exercise</h2>
                </span>
                <span style="font-weight: 800 !important;">
                  <h2>Routine</h2>
                </span>
              </div>
              <div class="col-6">
                <img src="https://i.pinimg.com/originals/6f/a3/1e/6fa31e02a2828db7c8273fba253d863f.gif" alt="" height="120" width="140">
              </div>
            </div>
          </div>
          <div class="icon-item pcard2 col-lg-3 ml-2 col-md-12" style="background-color: #f3f4f5; border: 1px solid #394afb; border-radius: 10px; cursor: pointer;" (click)="takeSurvey()">
            <div class="row" style="display: flex;flex-direction: row;">
              <div class="col-5" style="display: flex;flex-direction: column; margin-left: 10px; align-items: center; justify-content: center;">
                <span style="font-weight: 800;">
                  <h2 style="margin:0px">Take</h2>
                </span>
                <span style="font-weight: 800 !important;">
                  <h2>Survey</h2>
                </span>
              </div>
              <div class="col-6">
                <img src="http://mutualgrowth.com/media/survey-gif.gif" alt="" height="50" width="50" style="margin-top: 30%;">
              </div>
            </div>
          </div>
          <div class="icon-item pcard2 col-lg-3 ml-2 col-md-12" style="background-color: #f3f4f5; border: 1px solid #394afb; border-radius: 10px; cursor: pointer;" onclick="window.open('https://www.yalemedicine.org/news/stress-anxiety-depression')">
            <div class="row" style="display: flex;flex-direction: row;">
              <div class="col-5" style="display: flex;flex-direction: column; margin-left: 10px; align-items: center; justify-content: center;">
                <span style="font-weight: 800;">
                  <h2 style="margin:0px">Medical</h2>
                </span>
                <span style="font-weight: 800 !important;">
                  <h2>Education</h2>
                </span>
              </div>
              <div class="col-6">
                <img src="https://media.baamboozle.com/uploads/images/89984/1613600701_82187_gif-url.gif" alt="" height="80" width="80">
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>
  <div class="row" *ngIf='loggedInUser.user.type == 0'>
    <div class="col-2 px-1 bg-dark position-fixed" id="sticky-sidebar" style="height: 100vh;background-color: #E7E9EB !important;">
      <app-sidemenubar [user]="loggedInUser"></app-sidemenubar>
    </div>
      <div class="col-10 offset-2" id="main">
        <div class="row" *ngIf="selectedTab == 1">
            <div class="col-lg-5 md-12" >
                <div class="col-12" style="margin-top: 15px; font-weight: 600; padding: 0px;">
                    Dashboard
                </div>
                <div class="row" style="display: flex;flex-direction: column;">
                    <div class="col-12 kt-piechart">
                        <div style="display: flex; justify-content: space-between;">
                          <div class="name">
                            Patients Review
                        </div>
                        <div class="name">
                          Today
                      </div>
                        </div>
                        <hr>
                        <div echarts [options]="piePlant1" style="height: 200px"></div>
                    </div>
                    <div class="col-12 kt-piechart">
                            <div style="display: flex;">
                                <div class="name">
                                    Patients By Division
                                </div>
                            </div>
                            <hr>
                        <div echarts [options]="piePlant" style="height: 200px"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-7 md-12">
                <div class="col-12" style="margin-top: 15px; font-weight: 600; padding: 0px;">
                    Doctors Review
                </div>
                <div class="card" style="margin-left: 5%;margin-right: 5%;; margin-top: 3%; padding: 15px;">
                    <mat-tab-group animationDuration="1000ms" style="margin-bottom: 0px !important">
                      <mat-tab label="Pending">
                        <!-- <div class="card" style="margin-left: 5%;margin-right: 5%;; margin-top: 3%; padding: 15px;"> -->
                            <table mat-table [dataSource]="pendingSource" class="mat-elevation-z8">
                              <!--- Note that these columns can be defined in any order.
                                    The actual rendered columns are set as a property on the row definition" -->
                            
                              <!-- Position Column -->
                              <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> No. </th>
                                <td mat-cell *matCellDef="let element; let i = index"> {{i+1.}} </td>
                              </ng-container>
                            
                              <!-- Name Column -->
                              <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef> Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.patientId.name}} </td>
                              </ng-container>
                            
                              <!-- Weight Column -->
                              <ng-container matColumnDef="weight">
                                <th mat-header-cell *matHeaderCellDef> Condition </th>
                                <td mat-cell *matCellDef="let element"> {{element.conditionId.name}} </td>
                              </ng-container>
                            
                              <!-- Symbol Column -->
                              <ng-container matColumnDef="symbol">
                                <th mat-header-cell *matHeaderCellDef> Action </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <button type="button" mat-button mat-raised-button class="btn btn-outline-success" style="margin-right: 5px;" (click)="openReviewDialog(element)">Review</button>
                              </ng-container>
                            
                              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                            <div class="mat-table__message" *ngIf="!pendingSource?.data?.length">No records found</div>
                            
                            <!-- </div> -->
                          </mat-tab>
                        <mat-tab label="Completed">
                            <!-- <div class="card" style="margin-left: 5%;margin-right: 5%;; margin-top: 3%; padding: 15px;"> -->
                                <table mat-table [dataSource]="CompletedSource" class="mat-elevation-z8">
                                  <!--- Note that these columns can be defined in any order.
                                        The actual rendered columns are set as a property on the row definition" -->
                                
                                  <!-- Position Column -->
                                  <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef> No. </th>
                                    <td mat-cell *matCellDef="let element; let i = index" style=" width: 5%;"> {{i+1.}} </td>
                                  </ng-container>
                                
                                  <!-- Name Column -->
                                  <ng-container matColumnDef="name">
                                    <th mat-header-cell *matHeaderCellDef> Name </th>
                                    <td mat-cell *matCellDef="let element" style=" width: 10%;"> {{element.patientId.name}} </td>
                                  </ng-container>
                                
                                  <!-- Weight Column -->
                                  <ng-container matColumnDef="weight">
                                    <th mat-header-cell *matHeaderCellDef> Condition </th>
                                    <td mat-cell *matCellDef="let element" style=" width: 10%;"> {{element.conditionId.name}} </td>
                                  </ng-container>
                                
                                  <!-- Symbol Column -->
                                  <ng-container matColumnDef="symbol">
                                    <th mat-header-cell *matHeaderCellDef> Review </th>
                                    <td mat-cell *matCellDef="let element" style=" width: 10%;"> {{element.review}} </td>
                                  </ng-container>
                                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                                <div class="mat-table__message" *ngIf="!CompletedSource?.data?.length">No records found</div>

                              <!-- </div> -->
                        </mat-tab>
                        
                        <mat-tab label="Escalated">
                            <!-- <div class="card" style="margin-left: 5%;margin-right: 5%;; margin-top: 3%; padding: 15px;"> -->
                                <table mat-table [dataSource]="getallPatients" class="mat-elevation-z8">
                                  <!--- Note that these columns can be defined in any order.
                                        The actual rendered columns are set as a property on the row definition" -->
                                
                                  <!-- Position Column -->
                                  <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef> No. </th>
                                    <td mat-cell *matCellDef="let element; let i = index"> {{i+1.}}  </td>
                                  </ng-container>
                                
                                  <!-- Name Column -->
                                  <ng-container matColumnDef="name">
                                    <th mat-header-cell *matHeaderCellDef> Name </th>
                                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                                  </ng-container>
                                
                                  <!-- Weight Column -->
                                  <ng-container matColumnDef="weight">
                                    <th mat-header-cell *matHeaderCellDef> Condition </th>
                                    <td mat-cell *matCellDef="let element"> {{element.conditionId.name}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="date">
                                    <th mat-header-cell *matHeaderCellDef> Last Survey At </th>
                                    <td mat-cell *matCellDef="let element"> {{element.date | date :'mediumDate'}} </td>
                                  </ng-container>
                                  <!-- Symbol Column -->
                                  <ng-container matColumnDef="symbol">
                                    <th mat-header-cell *matHeaderCellDef> Action </th>
                                    <td mat-cell *matCellDef="let element" style=" width: 10%;"> <button type="button" mat-button mat-raised-button class="btn btn-outline-success" style="margin-right: 5px;" (click)="emailforSurvey(element)">Ask For Survey</button> </td>
                                  </ng-container>
                                
                                  <tr mat-header-row *matHeaderRowDef="esdisplayedColumns"></tr>
                                  <tr mat-row *matRowDef="let row; columns: esdisplayedColumns;"></tr>
                                </table>
                                <!-- <mat-paginator #paginator [pageSizeOptions]="[5,8,10]" showFirstLastButtons></mat-paginator> -->
                                <div class="mat-table__message" *ngIf="!getallPatients?.data?.length">No records found</div>

                              <!-- </div> -->
                        </mat-tab>
                      </mat-tab-group>
                </div>
            </div>
        </div>
        <div class="row" *ngIf="selectedTab == 4">
            
            <div class="col-12">
            <div class="card" style="margin-left: 5%;margin-right: 5%;; margin-top: 3%; padding: 15px;">
                <div class="col-12" style="margin-top: 15px; font-weight: 600;">
                    Manage Patients
                </div>
                <table mat-table [dataSource]="allPatientsDataSource" class="mat-elevation-z8">
                  <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef> No. </th>
                    <td mat-cell *matCellDef="let element; let i = index"> {{i+1.}} </td>
                  </ng-container>
                  <!-- Name Column -->
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef> Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                  </ng-container>
                  <!-- Weight Column -->
                  <ng-container matColumnDef="weight">
                    <th mat-header-cell *matHeaderCellDef> Condition </th>
                    <td mat-cell *matCellDef="let element"> {{element.conditionId.name}} </td>
                  </ng-container>
                  <ng-container matColumnDef="age">
                    <th mat-header-cell *matHeaderCellDef> Age </th>
                    <td mat-cell *matCellDef="let element"> {{element.age}} </td>
                  </ng-container>
                  <ng-container matColumnDef="phoneNumber">
                    <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                    <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
                  </ng-container>
                  <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef> Email </th>
                    <td mat-cell *matCellDef="let element"> {{element.userId?.email}} </td>
                  </ng-container>
                  <!-- Symbol Column -->
                  <ng-container matColumnDef="symbol">
                    <th mat-header-cell *matHeaderCellDef> Symbol </th>
                    <td mat-cell *matCellDef="let element">
                        <div style="display: flex; flex-direction: row; align-items: center; ">
                            <button type="button" mat-button mat-raised-button class="btn btn-outline-success" style="margin-right: 5px;" (click)="openDialog(element)">Edit</button>
                            <button type="button" mat-button mat-raised-button class="btn btn-outline-danger" (click)="offboardDialog(element)"> {{element.status? 'Offboard': 'Onboard'}}</button>
                            <a href="https://mail.google.com/mail/?view=cm&fs=1&to={{element.userId?.email}}" target="_blank" style="margin-left: 10px;"> <mat-icon> email</mat-icon></a>
                        </div>
                    </td>
                  </ng-container>
                
                  <tr mat-header-row *matHeaderRowDef="managedisplayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: managedisplayedColumns;"></tr>
                </table>
                <mat-paginator #paginator [pageSizeOptions]="[5,8,10]" showFirstLastButtons></mat-paginator>
              </div>
            </div>
        </div>
        <div class="row"  *ngIf="selectedTab == 2">
            <div [formGroup]="onboardForm" class="container-fluid p-0 card" style="margin-left: 5%;margin-right: 5%;; margin-top: 3%; padding: 15px;">
                <h4 class="m-3">Onboard New Patient</h4>
                <hr>
                <!-- <form > -->
                <div class="row p-3" style="justify-content: center;flex-direction: row">
                    <div class="col-md-4 col-sm-5 m-3">
                      <label for="inputEmail4" class="form-label">First Name*</label>
                      <input type="text" class="form-control" formControlName="firstName"  aria-label="First name">
                      
                    </div>
                    <div class="col-md-4 col-sm-5 mt-3">
                      <label for="inputEmail4" class="form-label">Last Name*</label>
                      <input type="text" class="form-control" formControlName="lastName"  aria-label="Last name">
                      
                    </div>
                    <div class="col-md-4 col-sm-5  m-3">
                        <label for="inputEmail4" class="form-label">Age*</label>
                        <input type="number" class="form-control" formControlName="age" aria-label="Last name">
                      </div>
                      <div class="col-md-4 col-sm-5 mt-3">
                        <label for="inputEmail4" class="form-label">Gender*</label>
                        <select class="form-select w-100" formControlName="gender" style="height:37px;" aria-label="Default select example">
                            <option selected></option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                          </select>
                      </div>
                      <div class="col-md-4 col-sm-5 m-3">
                        <label for="inputEmail4" class="form-label">Email Address*</label>
                        <input type="text" class="form-control" formControlName="email"  aria-label="Last name">
                        <mat-error *ngIf="isControlHasError('email','email')">
                            <p style="color: red;">Please Enter email</p>
                        </mat-error>
                      </div>
                      <div class="col-md-4 col-sm-5 mt-3">
                        <label for="inputEmail4" class="form-label">Mobile Number*</label>
                        <input type="number" class="form-control" formControlName="mobileno" aria-label="Last name">
                      </div>
                      <div class="col-md-4 col-sm-5 m-3">
                        <label for="inputEmail4" class="form-label">Condition*</label>
                        <select class="form-select w-100" style="height:37px;" formControlName="condition" aria-label="Default select example">
                            <option selected>Select Condition</option>
                            <option *ngFor="let o of allConditios" value="{{o._id}}">{{o.name}}</option>
                            <!-- <option value="stomach pain">stomach pain</option> -->
                          </select>
                      </div>
                      <div class="col-md-12 d-flex">
                          <hr>
                         <button class="btn btn-dark mt-5"style="width:100px;" (click)= "onsubmit()">On Board</button>
                         <button class="btn mt-5" style="width:100px;background-color: #ced4da; margin: 0 0 0 40px;">Cancel</button>
                      </div>
                  </div>
                <!-- </form> -->
                </div>
        </div>
    </div>
  </div>

</div>

